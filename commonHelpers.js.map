{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getImages(searchQuery, currentPage) {\n    const key = '42692774-4141696abcbee76e8cc433895';\n    const BASE_URL = 'https://pixabay.com/api/';\n    const image_type = 'photo';\n    const orientation = 'horizontal';\n    const safesearch = 'true';\n    const perPage = 15;\n    const response = await axios.get(`${BASE_URL}?key=${key}&q=${searchQuery}&page=${currentPage}&per_page=${perPage}&image_type=${image_type}&orientation=${orientation}&safesearch=${safesearch}`)\n    return response.data;\n};","import {gallery, lightbox}  from \"../main\";\n\n\nexport default function galleryMarkUp(images) {\n    const markup= images\n        .map(\n            ({ webformatURL, tags, largeImageURL, likes, views, comments, downloads }) => {\n                return`<li class = \"gallery-item\">\n                    <a class=\"gallery-link\" href=${largeImageURL}>\n                        <img\n                        src=\"${webformatURL}\"\n                        class=\"gallery-image\"\n                        alt=\"${tags}\"\n                        />\n                    </a>\n                    <div class=\"description\">\n                        <div class=\"field\">\n                        <span class=\"label\"><b>Likes</b></span>\n                        <span class=\"value\">${likes}</span>\n                        </div>\n                        <div  class=\"field\">\n                        <span class=\"label\"><b>Views</b></span>\n                        <span class=\"value\">${views}</span>\n                        </div>\n                        <div  class=\"field\">\n                        <span class=\"label\"><b>Comments</b></span>\n                        <span class=\"value\">${comments}</span>\n                        </div>\n                        <div  class=\"field\">\n                        <span class=\"label\"><b>Downloads</b></span>\n                        <span class=\"value\">${downloads}</span>\n                        </div>\n                    </div>\n                    \n                </li>`\n  }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport getImages from './js/pixabay-api';\nimport galleryMarkUp from './js/render-functions';\n\nexport const lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n\nconst searchform = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst moreBtn = document.querySelector(\".btn\");\nexport const gallery = document.querySelector(\".gallery\");\n\nlet currentPage;\nlet searchQuery;\n\n// const totalPages = Math.round(images.totalHits / 15);\n\nsearchform.addEventListener('submit', async (event) => {\n    try {\n        loader.classList.remove(\"isInvisible\");\n        event.preventDefault();\n        gallery.innerHTML = \"\";\n        const query = (event.target.elements.query.value).split(\" \");\n        searchQuery = query.join(\"+\");\n        currentPage = 1;\n\n        if (searchQuery == \"\") {\n            alert(\"Fill out the search input!\")\n        }\n        const images = await getImages(searchQuery, currentPage);\n        if (searchQuery != \"\") {\n    \n            galleryMarkUp(images.hits);\n            moreBtn.classList.remove(\"isInvisible\");\n            loader.classList.add(\"isInvisible\");\n\n        }\n        if (images.hits == \"\") {\n            moreBtn.classList.add(\"isInvisible\");\n            iziToast.show({\n                transitionIn: 'fadeInLeft',\n                transitionOut: 'fadeOutRight',\n                position: 'topRight',\n                messageColor: 'white',\n                backgroundColor: 'rgba(255, 110, 110, 1)',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            })\n        }\n        if (currentPage >= Math.round(images.totalHits / 15)) {\n            moreBtn.disabled = true;\n            moreBtn.classList.add(\"isInvisible\");\n            return iziToast.error({\n                position: \"topRight\",\n                message: \"We're sorry, there are no more posts to load\"\n            });\n        } \n\n    }  catch (error) {\n        console.log(error);\n  }\n});\n\n\n\nmoreBtn.addEventListener('click', async (event) => {\n    try { \n        loader.classList.remove(\"isInvisible\");\n        event.preventDefault();\n        currentPage += 1;\n        \n        const images = await getImages(searchQuery, currentPage);\n        galleryMarkUp(images.hits);\n        loader.classList.add(\"isInvisible\");\n\n        if (currentPage>Math.round(images.totalHits / 15)) {\n            moreBtn.disabled = true;\n            moreBtn.classList.add(\"isInvisible\");\n            return iziToast.error({\n                position: \"topRight\",\n                message: \"We're sorry, there are no more posts to load\"\n            });\n        }\n\n    \n        const img = document.querySelector(\".gallery-image\");\n        const imgSize = img.getBoundingClientRect();\n        const cardHeight = imgSize.height;\n        \n        window.scrollBy({\n            top: 2 * cardHeight,\n            behavior: \"smooth\",\n        });\n    }catch (error) {\n        console.log(error);\n  }\n});\n\n\n"],"names":["getImages","searchQuery","currentPage","key","BASE_URL","image_type","orientation","safesearch","axios","galleryMarkUp","images","markup","webformatURL","tags","largeImageURL","likes","views","comments","downloads","gallery","lightbox","SimpleLightbox","searchform","loader","moreBtn","event","iziToast","error","cardHeight"],"mappings":"owBAEe,eAAeA,EAAUC,EAAaC,EAAa,CAC9D,MAAMC,EAAM,qCACNC,EAAW,2BACXC,EAAa,QACbC,EAAc,aACdC,EAAa,OAGnB,OADiB,MAAMC,EAAM,IAAI,GAAGJ,CAAQ,QAAQD,CAAG,MAAMF,CAAW,SAASC,CAAW,2BAAmCG,CAAU,gBAAgBC,CAAW,eAAeC,CAAU,EAAE,GAC/K,IACpB,CCRe,SAASE,EAAcC,EAAQ,CAC1C,MAAMC,EAAQD,EACT,IACG,CAAC,CAAE,aAAAE,EAAc,KAAAC,EAAM,cAAAC,EAAe,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACpD;AAAA,mDAC6BJ,CAAa;AAAA;AAAA,+BAEjCF,CAAY;AAAA;AAAA,+BAEZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAMWE,CAAK;AAAA;AAAA;AAAA;AAAA,8CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,8CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,8CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,sBAKpD,EAAE,KAAK,EAAE,EACRC,EAAQ,mBAAmB,YAAaR,CAAM,EAC9CS,EAAS,QAAO,CACpB,CC9BO,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,KAAK,CAAE,EAE1EC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,MAAM,EAChCL,EAAU,SAAS,cAAc,UAAU,EAExD,IAAIjB,EACAD,EAIJqB,EAAW,iBAAiB,SAAU,MAAOG,GAAU,CACnD,GAAI,CACAF,EAAO,UAAU,OAAO,aAAa,EACrCE,EAAM,eAAc,EACpBN,EAAQ,UAAY,GAEpBlB,EADewB,EAAM,OAAO,SAAS,MAAM,MAAO,MAAM,GAAG,EACvC,KAAK,GAAG,EAC5BvB,EAAc,EAEVD,GAAe,IACf,MAAM,4BAA4B,EAEtC,MAAMS,EAAS,MAAMV,EAAUC,EAAaC,CAAW,EAmBvD,GAlBID,GAAe,KAEfQ,EAAcC,EAAO,IAAI,EACzBc,EAAQ,UAAU,OAAO,aAAa,EACtCD,EAAO,UAAU,IAAI,aAAa,GAGlCb,EAAO,MAAQ,KACfc,EAAQ,UAAU,IAAI,aAAa,EACnCE,EAAS,KAAK,CACV,aAAc,aACd,cAAe,eACf,SAAU,WACV,aAAc,QACd,gBAAiB,yBACjB,QAAS,0EACzB,CAAa,GAEDxB,GAAe,KAAK,MAAMQ,EAAO,UAAY,EAAE,EAC/C,OAAAc,EAAQ,SAAW,GACnBA,EAAQ,UAAU,IAAI,aAAa,EAC5BE,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,8CACzB,CAAa,CAGR,OAASC,EAAO,CACb,QAAQ,IAAIA,CAAK,CACtB,CACH,CAAC,EAIDH,EAAQ,iBAAiB,QAAS,MAAOC,GAAU,CAC/C,GAAI,CACAF,EAAO,UAAU,OAAO,aAAa,EACrCE,EAAM,eAAc,EACpBvB,GAAe,EAEf,MAAMQ,EAAS,MAAMV,EAAUC,EAAaC,CAAW,EAIvD,GAHAO,EAAcC,EAAO,IAAI,EACzBa,EAAO,UAAU,IAAI,aAAa,EAE9BrB,EAAY,KAAK,MAAMQ,EAAO,UAAY,EAAE,EAC5C,OAAAc,EAAQ,SAAW,GACnBA,EAAQ,UAAU,IAAI,aAAa,EAC5BE,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,8CACzB,CAAa,EAML,MAAME,EAFM,SAAS,cAAc,gBAAgB,EAC/B,wBACO,OAE3B,OAAO,SAAS,CACZ,IAAK,EAAIA,EACT,SAAU,QACtB,CAAS,CACJ,OAAOD,EAAO,CACX,QAAQ,IAAIA,CAAK,CACtB,CACH,CAAC"}